@page "/editlawfirm"
@using LaweyrServices.Web.Shared.LawFirmModels
@using LaweyrServices.Web.Shared.WorkingTimeModels

@inject HttpClient Http
@layout Shared.AdministrationLayout

<AuthorizeView Roles="Lawyer">
    <Authorized>
        <div class="col-md-10 col-lg-11 col-xl-12" data-select2-id="10">
            <div class="card" data-select2-id="9">
                <div class="card-body" data-select2-id="8">
                    <h4 class="card-title text-center">Информация за кантората</h4>
                    <div class="row form-row" data-select2-id="7">

                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Имена <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" >
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Email <span class="text-danger">*</span></label>
                                <input type="email" class="form-control" readonly="">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>First Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Last Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Phone Number</label>
                                <input type="text" class="form-control">
                            </div>
                        </div>
                        <div class="col-md-6" data-select2-id="6">
                            <div class="form-group">
                                <label>Phone Number</label>
                                <input type="text" class="form-control">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group mb-0">
                                <label>Date of Birth</label>
                                <input type="text" class="form-control">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title text-center">За кантората</h4>
                    <div class="form-group mb-0">
                       
                        <textarea class="form-control" rows="5"></textarea>
                    </div>
                </div>
            </div>
            <div class="card card-table flex-fill">
                <div class="card-header">
                    <h4 class="card-title text-center">Адвокати в @response?.Name</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover table-center mb-0">
                            <thead>
                                <tr>
                                    <th>Адвокат</th>
                                    <th>Календар</th>
                                    <th>Услуги</th>
                                    <th>Срещи</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    @if (response == null)
                                    {
                                        <p>loading</p>
                                    }
                                    else
                                    {
                                        foreach (var lawyer in response.Companies)
                                        {
                                            <td>
                                        <h2 class="table-avatar">

                                            <a href="profile.html">@lawyer.Names</a>
                                        </h2>
                                    </td>
                                    <td>
                                        <a href="/editscheduler/@lawyer?.Names/@lawyer?.Id" class="btn btn-sm bg-info-light" data-toggle="modal" data-target="#appt_details" >
                                            <i class="far fa-eye"></i> Календар
                                        </a>
                                    </td>
                                    <td>
                                        <a href="/editservicebyowner/@lawyer?.Names/@lawyer?.Id" class="btn btn-sm bg-info-light" data-toggle="modal" data-target="#appt_details">
                                            <i class="far fa-eye"></i> Услуги
                                        </a>
                                    </td>
                                    <td>
                                        <a href="#" class="btn btn-sm bg-info-light" data-toggle="modal" data-target="#appt_details">
                                            <i class="far fa-eye"></i> Срещи
                                        </a>
                                    </td>
                                        }
                                    }
                                    
                                </tr>




                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </Authorized>
    <NotAuthorized>

    </NotAuthorized>
</AuthorizeView>

@code {
    
    private LawFirmViewModel? response;

    protected override async Task OnInitializedAsync()
    {
        response = await Http.GetFromJsonAsync<LawFirmViewModel>($"EditLawFirmByOwner/GetLawFirmInformation");
    }
}
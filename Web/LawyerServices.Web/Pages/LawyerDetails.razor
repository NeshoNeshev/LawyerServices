@page "/lawyer"
@page "/lawyer/{LawyerId}"
@using LawyerServices.Common.LawyerViewModels
@using LawyerServices.Common.WorkingTimeModels
@using LawyerServices.Services.Data.AdminServices

@inject ILawyerService lawyerService
@inject NavigationManager navigationManager
@inject AuthenticationStateProvider AuthenticationStateProvider

<h3>LawyerDetails</h3>

@*<div class="container containershadow marg">
    <div class="row justify-content-center">
    <div class="col-md-4" style="text-align:center">
    <img src="https://res.cloudinary.com/dhtcvjbya/image/upload/v1628427665/s77lagl1bt6c2b0au6tb.jpg" alt="Д-р Констанца Нейкова, дм" class="img-fluid" width="200" height="200" itemprop="image">
    </div>
    <div class="col-md-8">
    <div class="row">
    <h1 class="text-center">Advokat Nesho Neshev</h1>
    <a href="" class="firm">Адвокатска кантора „Шилев, Георгиева и Димитрова“</a>
    <h3>гр. Пловдив, ул."Опълченска" 10</h3>
    <div class="card shading">
    <div class="card-body">
    <h3 class="card-title">Запази час</h3>
    <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
    <a href="#" class="btn btn-primary">Go somewhere</a>
    </div>
    </div>
    </div>
    </div>

    </div>
    <div class="row">
    <p>dassasdadsa</p>
    <p>dassasdadsa</p>
    <p>dassasdadsa</p>
    </div>
    </div>*@
<div>


    <div class="row lawyer justify-content-center">
        <div class="col-sm-4" style="text-align:center">
            <a href="https://res.cloudinary.com/dhtcvjbya/image/upload/v1628427665/s77lagl1bt6c2b0au6tb.jpg">

                <img src="/images/lawyer-1.png" alt="Доц. Сашка Михайлова, дм" width="210" height="210" class="img-fluid rounded-circle">


            </a>
            @*<img src="https://res.cloudinary.com/dhtcvjbya/image/upload/v1628427665/s77lagl1bt6c2b0au6tb.jpg" alt="Д-р Констанца Нейкова, дм" class="img-fluid" width="200" height="200" itemprop="image">*@
        </div>
        <div class="col-sm-8">
            <h1>@model?.Names</h1>
            <a href="" class="firm">@model?.OfficeName</a>
            <h3>@model?.Address</h3>
            <p>
                @model?.Qualifications
            </p>
        </div>
    </div>

    <div class="row lawyer justify-content-center">
        <div class="col-md-6">
            <div class="row">
                <div>
                    <h3>Proffesional opit</h3>
                    <p>
                        @model?.Experience
                    </p>
                </div>

            </div>
            <div class=row>
                <h3>Obrazovanie</h3>
                <p>
                    @model?.Education
                </p>
            </div>
        </div>
        @*<div class="col-md-4">
            <div class="col">
            <ul>
            <li><span class="oi oi-comment-square"> English, Bulgarian</span></li>
            <li><a href="tel:099999999999"> <span class="oi oi-comment-square"> 0888727670</span></a></li>
            <li><a href="mailto:neshev1978@abv.bg"> <span class="oi oi-comment-square"> neshev1978@abv.bg</span></a></li>
            <li><a href="https://neshoneshev.eu"> <span class="oi oi-comment-square"> https://neshoneshev.eu</span></a></li>
            </ul>

            </div>
            </div>*@
        <div class="col-lg-12 col-xl-4 p-3">
            <RadzenScheduler Data="@wtmodel" TItem="WorkingTimeExceptionViewModel" StartProperty="StarFrom" EndProperty="EndTo" TextProperty="AppointmentType" AppointmentSelect=@OnAppointmentSelect>
                <RadzenWeekView />
            </RadzenScheduler>
        </div>



        @*<div class="row lawyer">
            <div class="card" style="border-color:black">
            <RadzenGoogleMap style="height: 400px" Zoom=@zoom Center=@(new GoogleMapPosition() { Lat = 42.6977, Lng = 23.3219 }) MapClick=@OnMapClick MarkerClick=@OnMarkerClick>
            <Markers>
            <RadzenGoogleMapMarker Title="London" Label="London" Position=@(new GoogleMapPosition() { Lat = 51.5074, Lng = 0.1278 }) />
            <RadzenGoogleMapMarker Title="Paris " Label="Paris" Position=@(new GoogleMapPosition() { Lat = 48.8566, Lng = 2.3522 }) />
            @if (showMadridMarker)
            {
            <RadzenGoogleMapMarker Title="Madrid " Label="Madrid" Position=@(new GoogleMapPosition() { Lat = 40.4168, Lng = -3.7038 }) />
            }
            </Markers>
            </RadzenGoogleMap>
            </div>
            </div>
            <div class="row lawyer">
            <div class="col">
            <p>@date</p>
            </div>
            <button @onclick="OnClick">click</button>
            </div>*@

    </div>

    <div class="row lawyer justify-content-center">
        <div class="col-sm-4" style="text-align:center">
            <a href="https://res.cloudinary.com/dhtcvjbya/image/upload/v1628427665/s77lagl1bt6c2b0au6tb.jpg">

                <img src="/images/lawyer-1.png" alt="Доц. Сашка Михайлова, дм" width="210" height="210" class="img-fluid rounded-circle">


            </a>
            @*<img src="https://res.cloudinary.com/dhtcvjbya/image/upload/v1628427665/s77lagl1bt6c2b0au6tb.jpg" alt="Д-р Констанца Нейкова, дм" class="img-fluid" width="200" height="200" itemprop="image">*@
        </div>
        <div class="col-sm-8">
            <h3>Адвокат</h3>

            <h1>Nesho Neshev</h1>
            <a href="" class="firm">Адвокатска кантора „Шилев, Георгиева и Димитрова“</a>
            <h3>гр. Пловдив, ул."Опълченска" 10</h3>
            <p>
                Surgery of the respiratory tract is generally performed by specialists in cardiothoracic surgery (or thoracic surgery) though minor procedures may be performed by
                pulmonologists. Pulmonology is closely.
            </p>
        </div>
    </div>
</div>
<style>
    /* .rz-slot-hours {
            display: none;
        }
    */
    /*    .rz-slot-hour-header {
            display: none;
        }*/

    .rz-view-header .rz-slot-hour-header {
        flex: none;
        width: 25px;
    }

    .rz-event-content {
        cursor: pointer;
    }
</style>
@code {
    int zoom = 3;
    bool showMadridMarker;
    DateTime? value = DateTime.Now;
    DateTime date;
    IList<DateTime> dateTime;
    [Parameter]
    public string LawyerId { get; set; }

    private LawyerListItem model;
    private List<WorkingTimeExceptionViewModel> wtmodel;
    protected override void OnInitialized()
    {

        dateTime = new List<DateTime>();
        dateTime.Add(DateTime.UtcNow.Date);
        dateTime.Add(DateTime.UtcNow.AddDays(1).Date);
        dateTime.Add(DateTime.UtcNow.AddDays(2).Date);
        dateTime.Add(DateTime.UtcNow.AddDays(3).Date);
        dateTime.Add(DateTime.UtcNow.AddDays(4).Date);
        dateTime.Add(DateTime.UtcNow.AddDays(5).Date);
        dateTime.Add(DateTime.UtcNow.AddDays(6).Date);
        base.OnInitialized();
        date = DateTime.UtcNow.AddDays(6);
        model = this.lawyerService.GetLawyerById(LawyerId);
        wtmodel = model.WorkingTime.WorkingTimeException.ToList();

    }
    async Task OnAppointmentSelect(SchedulerAppointmentSelectEventArgs<WorkingTimeExceptionViewModel> args)
    {
        var authState = AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.Result.User;
        if (!user.Identity.IsAuthenticated)
        {
            this.navigationManager.NavigateTo("/Identity/Account/Login", true);
        }
        else
        {

            this.navigationManager.NavigateTo($"/booking/{model.Id}/{args.Data.Id}");
        }

    }


    void OnChange(DateTime? value, string name, string format)
    {

    }
    void OnMapClick(GoogleMapClickEventArgs args)
    {

    }

    void OnMarkerClick(RadzenGoogleMapMarker marker)
    {

    }
    void OnClickRight()
    {

    }
    void OnClickLeft()
    {

    }
 }

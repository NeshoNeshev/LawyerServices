@page  "/lawyerbooking/{userId}"
@using LawyerServices.Common.WorkingTimeModels
@using LawyerServices.Services.Data


@inject NavigationManager navigationManager
@inject IWorkingTimeExceptionService wteService


@layout Administration.Shared.AdminLayout
<AuthorizeView Roles="Lawyer">
    <Authorized>
       <table class="table table-bordered">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Име</th>
      <th scope="col">Фамилия</th>
      <th scope="col">Емайл</th>
      <th scope="col">Телефон</th>
    </tr>
  </thead>
  <tbody>
      @for (var i = 0; i < model.Count; i++)
      {
          <tr>
      <th scope="row">@i+1</th>
      <td>@model[i].User.FirstName</td>
      <td>@model[i].User.LastName</td>
      <td>@model[i].User.Email</td>
      <td><a href="tel:@model[i].User.PhoneNumber">@model[i].User.PhoneNumber</a></td>
      
    </tr>
      }
    
  </tbody>
</table>
    </Authorized>
    <NotAuthorized>
      @*  <h1>Authentication Failure!</h1>
        <p>You're not authorize.</p>*@
        @{
            navigationManager.NavigateTo("/Profile");
        }
    </NotAuthorized>
</AuthorizeView>>

@code {

    List<WorkingTimeExceptionBookingModel> model;

    [Parameter]
    public string UserId { get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();

        //model = this.wteService.GetRequestById("a10e3666-a7d2-451f-a5be-f6dd03cb282a").Result;

       model = this.wteService.GetAllRequsts(UserId).ToList();
    }

}
